{# templates/blocks/video.html #}
<div id="block-{{ b.id }}" class="card glass mb-3">
  <div class="card-body">
    <h5 class="card-title">{{ b.payload.title or "Видео" }}</h5>

    {# берём URL из разных возможных ключей #}
    {% set vurl = b.payload.url or b.payload.video_url or b.payload.link %}

    {% if vurl %}
      <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:0.75rem;">
        <iframe
          src="{{ vurl }}"
          style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen>
        </iframe>
      </div>

    {% elif b.payload.src %}
      <video class="w-100" controls style="border-radius:0.75rem;">
        <source src="{{ b.payload.src }}" type="video/mp4">
        Ваш браузер не поддерживает тег <code>video</code>.
      </video>

    {% else %}
      <p class="text-secondary small mb-0">Видео не задано.</p>
    {% endif %}

    {% if b.payload.caption %}
      <p class="text-secondary small mt-2">{{ b.payload.caption }}</p>
    {% endif %}
  </div>
</div>
