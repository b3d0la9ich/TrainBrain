{{ define "title" }}Проверка отправки{{ end }}

{{ define "content" }}
<div class="container py-4">

  <h1 class="mb-3">Проверка отправки</h1>

  <a href="/admin/submissions" class="btn btn-secondary mb-3">← Назад</a>

  <div class="card glass p-3 mb-4">
    <h5 class="mb-2">Отправка #{{ .Submission.ID }}</h5>

    <p class="mb-1">
      <strong>Пользователь:</strong>
      {{ if .Submission.User.ID }}
        {{ .Submission.User.Email }}
      {{ else }}
        —
      {{ end }}
    </p>

    <p class="mb-1">
      <strong>Блок:</strong>
      {{ if .Submission.Block.Payload.title }}
        {{ .Submission.Block.Payload.title }}
      {{ else }}
        {{ .Submission.Block.Type }}
      {{ end }}
    </p>

    <p class="mb-1">
      <strong>Дата отправки:</strong>
      {{ .Submission.CreatedAt.Format "02.01.2006 15:04" }}
    </p>

    <p class="mb-1">
      <strong>Файл:</strong>
      {{ if .Submission.StoredPath }}
        <a href="/static/{{ .Submission.StoredPath }}" target="_blank">
          {{ .Submission.OriginalName }}
        </a>
      {{ else }}
        <span class="text-secondary">нет файла</span>
      {{ end }}
    </p>

    <p class="mb-3">
      <strong>Размер:</strong>
      {{ .SizeKB }} КБ
    </p>

    <hr>

    <h5>Обновить статус</h5>

    <form method="post">
      <div class="mb-3">
        <label for="status" class="form-label">Статус</label>
        <select id="status" name="status" class="form-select">
          {{ range $i, $s := .Statuses }}
            <option value="{{ $s }}"
              {{ if eq $.Submission.Status $s }}selected{{ end }}>
              {{ $s }}
            </option>
          {{ end }}
        </select>
      </div>

      <div class="mb-3">
        <label for="comment" class="form-label">Комментарий проверяющего</label>
        <textarea
          id="comment"
          name="comment"
          class="form-control"
          rows="3">{{ .Submission.Comment }}</textarea>
      </div>

      <button class="btn btn-primary" type="submit">Сохранить</button>
    </form>
  </div>

</div>
{{ end }}
